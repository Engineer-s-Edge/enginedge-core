{
  "name": "enginedge-core",
  "version": "1.0.0",
  "description": "Hexagon of the EnginEdge platform, orchestrates all services and workers",
  "author": "EnginEdge Team",
  "private": true,
  "license": "UNLICENSED",
  "scripts": {
    "build": "nest build",
    "format": "prettier --write \"src/**/*.ts\" \"test/**/*.ts\"",
    "start": "nest start",
    "start:dev": "nest start --watch",
    "start:debug": "nest start --debug --watch",
    "start:prod": "node dist/main",
    "start:in-memory": "cross-env USE_IN_MEMORY_DB=true nest start",
    "start:dev:in-memory": "cross-env USE_IN_MEMORY_DB=true nest start --watch",
    "start:debug:in-memory": "cross-env USE_IN_MEMORY_DB=true nest start --debug --watch",
    "scrape-openai-models": "ts-node -r tsconfig-paths/register src/scripts/scrape-openai-models.ts",
    "lint": "eslint \"{src,apps,libs,test}/**/*.ts\" --fix",
    "lint:check": "eslint \"{src,apps,libs,test}/**/*.ts\"",
    "test": "jest --passWithNoTests",
    "test:watch": "jest --watch",
    "test:cov": "jest --coverage --passWithNoTests --reporters=default --reporters=jest-junit",
    "test:related": "node -e \"const args=process.argv.slice(1); if(args.length===0){console.log('No files provided to test:related'); process.exit(0);} const {spawnSync}=require('node:child_process'); const res=spawnSync('npx', ['jest','--runInBand','--coverage=false','--passWithNoTests','--findRelatedTests',...args], {stdio:'inherit'}); process.exit(res.status||0);\"",
    "test:unit": "jest --coverage=false --testPathPattern=\\.spec\\.ts$ --passWithNoTests",
    "test:int": "jest --coverage=false --testPathPattern=\\.int\\.spec\\.ts$ --passWithNoTests",
    "test:tools": "jest --passWithNoTests --runInBand --coverage=false --testPathPattern=core/infrastructure/agents/tools/.*\\.spec\\.ts$",
    "test:single": "jest --config ./test/jest-single.json --runInBand",
    "test:single:path": "jest --config ./test/jest-single.json --runInBand --runTestsByPath",
    "test:agents:structures": "jest --passWithNoTests --runInBand --runTestsByPath src/core/infrastructure/agents/core/agents/structures/react.spec.ts src/core/infrastructure/agents/core/agents/structures/graph.spec.ts",
    "test:e2e": "jest --config ./test/jest-e2e.json --passWithNoTests",
    "test:int:e2e": "jest --config ./test/jest-e2e.json --passWithNoTests --testPathPattern=test/integration/.*\\.e2e-spec\\.ts$",
    "test:e2e:all": "jest --config ./test/jest-e2e.json --passWithNoTests --testPathPattern=test/(e2e|integration)/.*\\.e2e-spec\\.ts$",
    "test:e2e:ci": "jest --config ./test/jest-e2e.json --passWithNoTests --runInBand --maxWorkers=1 --reporters=default --reporters=jest-junit",
    "test:e2e:watch": "jest --config ./test/jest-e2e.json --watch",
    "test:e2e:coverage": "jest --config ./test/jest-e2e.json --coverage",
    "test:e2e:stream": "jest --runInBand --testPathPattern=streaming --passWithNoTests",
    "test:debug": "node --inspect-brk -r tsconfig-paths/register -r ts-node/register node_modules/.bin/jest --runInBand",
    "docker:build": "docker build -t enginedge-main-node .",
    "docker:run": "docker run --rm -p 3000:3000 --name enginedge-main-node-container -e MONGODB_URI=mongodb://host.docker.internal:27017/enginedge-main-node --add-host=host.docker.internal:host-gateway enginedge-main-node",
    "docker:stop": "docker stop enginedge-main-node-container",
    "docker:clean": "docker rm enginedge-main-node-container",
    "docker:compose": "docker-compose -f platform/docker-compose.yml up",
    "docker:compose:stop": "docker-compose -f platform/docker-compose.yml down",
    "docker:compose:build": "docker-compose -f platform/docker-compose.yml up --build",
    "docker:rebuild": "docker-compose -f platform/docker-compose.yml down && docker-compose -f platform/docker-compose.yml up --build",
    "docker:in-memory": "cross-env USE_IN_MEMORY_DB=true docker-compose -f platform/docker-compose.yml up",
    "docker:in-memory:build": "cross-env USE_IN_MEMORY_DB=true docker-compose -f platform/docker-compose.yml up --build",
    "help": "echo \"\nAvailable commands:\n\n  npm run build              - Build the application\n  npm run start              - Start the application\n  npm run start:dev          - Start the application in development mode with watch\n  npm run start:debug        - Start the application in debug mode\n  npm run start:prod         - Start the production build\n  npm run start:in-memory    - Start with in-memory MongoDB\n  npm run start:dev:in-memory - Start in dev mode with in-memory MongoDB\n  npm run start:debug:in-memory - Start in debug mode with in-memory MongoDB\n  npm run lint               - Run linter and fix issues\n  npm run format             - Format code with Prettier\n  npm test                   - Run tests\n  npm run test:watch         - Run tests in watch mode\n  npm run test:cov           - Run tests with coverage\n  npm run test:e2e           - Run end-to-end tests\n\n  Docker commands:\n  npm run docker:build       - Build Docker image\n  npm run docker:run         - Run Docker container (connects to host MongoDB)\n  npm run docker:stop        - Stop the Docker container\n  npm run docker:clean       - Remove the Docker container\n  npm run docker:compose     - Start with Docker Compose\n  npm run docker:compose:build - Build and start with Docker Compose\n  npm run docker:rebuild     - Rebuild and restart Docker (down then up --build)\n  npm run docker:in-memory   - Start with Docker Compose using in-memory MongoDB\n  npm run docker:in-memory:build - Build and start with Docker Compose using in-memory MongoDB\n\""
  },
  "dependencies": {
    "@anthropic-ai/sdk": "^0.39.0",
    "@aws-sdk/client-s3": "^3.821.0",
    "@google-cloud/local-auth": "^2.1.0",
    "@google/generative-ai": "^0.24.0",
    "@kubernetes/client-node": "^1.1.0",
    "@langchain/anthropic": "^0.3.15",
    "@langchain/community": "^0.3.55",
    "@langchain/core": "^0.3.43",
    "@langchain/deepseek": "^0.0.1",
    "@langchain/google-genai": "^0.2.0",
    "@langchain/groq": "^0.2.0",
    "@langchain/langgraph": "^0.2.70",
    "@langchain/mongodb": "^0.1.0",
    "@langchain/openai": "^0.5.0",
    "@langchain/textsplitters": "^0.0.3",
    "@langchain/xai": "^0.0.2",
    "@nestjs/axios": "^4.0.1",
    "@nestjs/common": "^10.0.0",
    "@nestjs/config": "^4.0.1",
    "@nestjs/core": "^10.4.15",
    "@nestjs/jwt": "^11.0.0",
    "@nestjs/microservices": "^10.4.15",
    "@nestjs/mongoose": "^11.0.3",
    "@nestjs/passport": "^11.0.5",
    "@nestjs/platform-express": "^10.0.0",
    "@notionhq/client": "^2.3.0",
    "@types/cheerio": "^0.22.35",
    "@types/node-cron": "^3.0.11",
    "ajv": "^8.12.0",
    "axios": "^1.8.4",
    "bcrypt": "^5.1.1",
    "canvas": "^3.1.0",
    "cheerio": "^1.1.2",
    "clarify": "^2.2.0",
    "class-transformer": "^0.5.1",
    "class-validator": "^0.14.2",
    "cookie-parser": "^1.4.7",
    "d3-array": "^3.2.4",
    "googleapis": "^105.0.0",
    "groq-sdk": "^0.17.0",
    "jsdom": "^26.1.0",
    "kafkajs": "^2.2.4",
    "langchain": "^0.3.19",
    "langchain-xai": "^0.2.2",
    "mathjs": "^14.4.0",
    "mongodb-memory-server": "^10.2.0",
    "mongoose": "^8.13.0",
    "natural": "^8.0.1",
    "node-cron": "^4.2.1",
    "node-html-parser": "^7.0.1",
    "node-tesseract-ocr": "^2.2.1",
    "notion-to-md": "^3.1.9",
    "officeparser": "^4.2.0",
    "openai": "^4.89.1",
    "passport": "^0.7.0",
    "passport-jwt": "^4.0.1",
    "passport-local": "^1.0.0",
    "pdf-parse": "^1.1.1",
    "pdfjs-dist": "^5.2.133",
    "reflect-metadata": "^0.2.0",
    "rss-parser": "^3.13.0",
    "rxjs": "^7.8.1",
    "sanitize-html": "^2.17.0",
    "srt-parser-2": "^1.2.3",
    "tesseract.js": "^6.0.1",
    "trace": "^3.2.0",
    "uuid": "^9.0.1",
    "wink-bm25-text-search": "^3.1.2",
    "wink-nlp-utils": "^2.1.0",
    "winston": "^3.17.0",
    "winston-daily-rotate-file": "^5.0.0",
    "youtubei.js": "^13.4.0"
  },
  "devDependencies": {
    "@jest/globals": "^30.1.2",
    "@nestjs/cli": "^10.0.0",
    "@nestjs/schematics": "^10.0.0",
    "@nestjs/testing": "^10.0.0",
    "@types/bcrypt": "^5.0.2",
    "@types/cookie-parser": "^1.4.7",
    "@types/d3-array": "^3.2.1",
    "@types/express": "^4.17.17",
    "@types/jest": "^29.5.2",
    "@types/node": "^20.3.1",
    "@types/passport-jwt": "^4.0.1",
    "@types/passport-local": "^1.0.38",
    "@types/supertest": "^6.0.0",
    "@types/uuid": "^9.0.8",
    "@typescript-eslint/eslint-plugin": "^8.0.0",
    "@typescript-eslint/parser": "^8.0.0",
    "cross-env": "^7.0.3",
    "eslint": "^9.0.0",
    "eslint-config-prettier": "^9.0.0",
    "eslint-plugin-prettier": "^5.0.0",
    "glob": "^10.3.10",
    "jest": "^29.5.0",
    "jest-junit": "^16.0.0",
    "prettier": "^3.0.0",
    "simple-statistics": "^7.8.8",
    "source-map-support": "^0.5.21",
    "supertest": "^7.0.0",
    "ts-jest": "^29.1.0",
    "ts-loader": "^9.4.3",
    "ts-node": "^10.9.1",
    "tsconfig-paths": "^4.2.0",
    "typescript": "^5.1.3"
  },
  "jest": {
    "moduleFileExtensions": [
      "ts",
      "js",
      "json"
    ],
    "rootDir": "src",
    "testMatch": [
      "<rootDir>/**/*.spec.ts"
    ],
    "testPathIgnorePatterns": [
      "/node_modules/",
      "core/infrastructure/agents/core/agents/test/unit/agent.service.exec.spec.ts"
    ],
    "transform": {
      "^.+\\.ts$": "ts-jest"
    },
    "transformIgnorePatterns": [
      "/node_modules/(?!@kubernetes/client-node|@langchain|srt-parser-2|groq-sdk)"
    ],
    "moduleNameMapper": {
      "^@kubernetes/client-node$": "<rootDir>/test/__mocks__/k8s-client-node.ts",
      "^pdfjs-dist/legacy/build/pdf.mjs$": "<rootDir>/test/__mocks__/pdfjs.ts",
      "^wink-nlp-utils$": "<rootDir>/test/__mocks__/wink-nlp-utils.ts",
      "^@langchain/community/document_loaders/fs/srt$": "<rootDir>/test/__mocks__/langchain_srt_loader.ts",
      "^@core/(.*)$": "<rootDir>/core/$1",
      "^@features/(.*)$": "<rootDir>/features/$1",
      "^@common/(.*)$": "<rootDir>/common/$1",
      "^@domain/(.*)$": "<rootDir>/../../enginedge-workers/data-processing-worker/src/domain/$1",
      "^@application/(.*)$": "<rootDir>/../../enginedge-workers/data-processing-worker/src/application/$1",
      "^@infrastructure/(.*)$": "<rootDir>/../../enginedge-workers/data-processing-worker/src/infrastructure/$1"
    },
    "collectCoverage": true,
    "coverageDirectory": "../coverage",
    "coverageProvider": "v8",
    "collectCoverageFrom": [
      "**/*.ts",
      "!main.ts",
      "!**/index.ts",
      "!**/module.ts",
      "!**/modules/*.module.ts",
      "!**/dto/**",
      "!**/entities/**",
      "!**/migrations/**",
      "!**/__mocks__/**",
      "!test/**",
      "!**/*.d.ts",
      "!**/*.spec.ts"
    ],
    "coveragePathIgnorePatterns": [
      "node_modules",
      "dist",
      ".*/__mocks__/.*"
    ],
    "coverageThreshold": {
      "global": {
        "branches": 4,
        "functions": 4,
        "lines": 4,
        "statements": 4
      }
    },
    "testEnvironment": "node",
    "testTimeout": 30000,
    "maxWorkers": "50%",
    "workerIdleMemoryLimit": "512MB",
    "reporters": [
      "default",
      [
        "jest-junit",
        {
          "outputDirectory": "../test-results",
          "outputName": "junit.xml"
        }
      ]
    ]
  },
  "resolutions": {
    "punycode": "^2.3.1",
    "tr46": "^3.0.0",
    "whatwg-url": "^11.0.0",
    "google-auth-library": "^8.9.0"
  },
  "overrides": {
    "punycode": "^2.3.1",
    "tr46": "^3.0.0",
    "whatwg-url": "^11.0.0",
    "google-auth-library": "^8.9.0"
  }
}
